class A {
  var n = 0;
  method ping() {
    n = n + 1;
    print("A.ping");
    print(n);
    if(n<100) { become B(); send self.ping(); }
  }
}

class B {
  method ping() {
    print("B.ping");
    become A();
    send self.ping();
  }
}

var x = new A();
send x.ping();
