; lexer.mll
(ocamllex (modules lexer))

; parser.mly → Menhir を使って処理
;(menhir
; (modules parser)
; (flags --infer))

; 共通ライブラリ
(library
 (name abcllib)
 (wrapped false)
 (modules
  ast
  types
  typing_env
  infer
  typecheck
  sdl_helper
  eval_thread
  compiler)
 (flags (:standard -w -a))
;; (preprocess (menhir))
 (libraries tsdl threads))

; 実行ファイル（REPL）
(executable
 (name repl_thread)         ; ← ファイル repl_thread.ml と一致させる
 (modules repl_thread)
;; (preprocess (menhir))
; (flags (:standard -w -9-26-27-32-33-8-11))
 (flags (:standard -w -a))
 (preprocess (menhir))
 (libraries abcllib tsdl threads))
